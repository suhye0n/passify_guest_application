import{a as N,c as T,d as z,f as A,h as j,i as q,l as H,m as L}from"./chunk-DHNC5GV5.js";import{a as Y}from"./chunk-CJRSKTN3.js";import{Da as k,E as u,Ea as D,F as c,G as x,H as E,Ia as R,Ka as W,M as s,N as l,V as w,X as r,Y as a,Z as O,aa as S,ba as h,d as G,da as P,ea as I,fa as V,ga as F,ha as p,ka as g,la as f,ma as C,oa as B,u as M,x as v,z as y}from"./chunk-ICBHZLZY.js";var Q=G(Y());var b=class d{constructor(e){this.http=e}getCoupon(e){return this.http.get(`/coupons/${e}`)}updateCoupon(e){return this.http.put(`/coupons/${e.id}`,e)}static \u0275fac=function(o){return new(o||d)(v(D))};static \u0275prov=M({token:d,factory:d.\u0275fac,providedIn:"root"})};var K=["barcode"],_=class d{constructor(e,o,t){this.couponEditService=e;this.router=o;this.route=t}coupon={userId:0,name:"",barcode:"",memo:""};couponId="";barcodeElement;ngOnInit(){this.route.paramMap.subscribe(e=>{this.couponId=e.get("id")||"",this.getCouponDetails(this.couponId)}),this.coupon.userId=Number(localStorage.getItem("userId"))}getCouponDetails(e){this.couponEditService.getCoupon(e).subscribe(o=>{this.coupon=o.data,this.generateBarcode(this.coupon.barcode)},o=>{console.error("\uCFE0\uD3F0 \uC815\uBCF4 \uBD88\uB7EC\uC624\uAE30 \uC2E4\uD328:",o)})}onSubmit(){this.couponEditService.updateCoupon(this.coupon).subscribe(e=>{this.router.navigate([`/coupons/${this.couponId}`])},e=>{console.error("\uCFE0\uD3F0 \uC218\uC815 \uC2E4\uD328:",e)})}generateBarcode(e){this.barcodeElement?.nativeElement&&e&&(0,Q.default)(this.barcodeElement.nativeElement,e,{format:"CODE128",width:2,height:50,displayValue:!0})}static \u0275fac=function(o){return new(o||d)(l(b),l(W),l(R))};static \u0275cmp=y({type:d,selectors:[["app-coupon-edit"]],viewQuery:function(o,t){if(o&1&&P(K,5),o&2){let i;I(i=V())&&(t.barcodeElement=i.first)}},standalone:!0,features:[B],decls:21,vars:4,consts:[["couponForm","ngForm"],["barcode",""],[1,"coupon-edit-container"],[3,"ngSubmit"],["for","name"],["id","name","type","text","name","name","required","",3,"ngModelChange","ngModel"],["for","barcode"],["id","barcode","type","text","name","barcode","required","",3,"ngModelChange","ngModel"],["for","memo"],["id","memo","name","memo",3,"ngModelChange","ngModel"],["type","submit",3,"disabled"]],template:function(o,t){if(o&1){let i=S();r(0,"div",2)(1,"h1"),p(2,"\uCFE0\uD3F0 \uC218\uC815"),a(),r(3,"form",3,0),h("ngSubmit",function(){return u(i),c(t.onSubmit())}),r(5,"div")(6,"label",4),p(7,"\uC774\uB984"),a(),r(8,"input",5),C("ngModelChange",function(n){return u(i),f(t.coupon.name,n)||(t.coupon.name=n),c(n)}),a()(),r(9,"div")(10,"label",6),p(11,"\uBC14\uCF54\uB4DC"),a(),r(12,"input",7),C("ngModelChange",function(n){return u(i),f(t.coupon.barcode,n)||(t.coupon.barcode=n),c(n)}),h("ngModelChange",function(){return u(i),c(t.generateBarcode(t.coupon.barcode))}),a(),x(),O(13,"svg",null,1),a(),E(),r(15,"div")(16,"label",8),p(17,"\uBA54\uBAA8"),a(),r(18,"textarea",9),C("ngModelChange",function(n){return u(i),f(t.coupon.memo,n)||(t.coupon.memo=n),c(n)}),a()(),r(19,"button",10),p(20,"\uCFE0\uD3F0 \uC218\uC815"),a()()()}if(o&2){let i=F(4);s(8),g("ngModel",t.coupon.name),s(4),g("ngModel",t.coupon.barcode),s(6),g("ngModel",t.coupon.memo),s(),w("disabled",i.invalid)}},dependencies:[k,L,q,N,T,z,H,j,A],styles:["body[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background:#f4f7fa;margin:0;padding:0}.coupon-edit-container[_ngcontent-%COMP%]{max-width:600px;margin:50px auto;padding:30px;background:linear-gradient(145deg,#fff,#f2f2f2);border-radius:15px;box-shadow:0 4px 20px #0000001a;transition:transform .3s ease-in-out}.coupon-edit-container[_ngcontent-%COMP%]:hover{transform:scale(1.02)}h1[_ngcontent-%COMP%]{text-align:center;font-size:2.2rem;color:#333;margin-bottom:20px;font-weight:700;letter-spacing:.5px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}label[_ngcontent-%COMP%]{font-size:1.1rem;color:#555;font-weight:600}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{padding:12px;font-size:1rem;border:2px solid #ddd;border-radius:10px;width:100%;box-sizing:border-box;background-color:#fafafa;transition:border-color .3s ease,background-color .3s ease}input[type=text][_ngcontent-%COMP%]:focus, input[type=number][_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{border-color:#ff9aa7;background-color:#fff;outline:none}button[_ngcontent-%COMP%]{padding:14px;font-size:1.1rem;color:#fff;background-color:#ff9aa7;border:none;border-radius:10px;cursor:pointer;transition:background-color .3s ease,transform .2s ease-in-out;font-weight:600}button[_ngcontent-%COMP%]:hover{background-color:#ff7b8d;transform:translateY(-2px)}button[_ngcontent-%COMP%]:active{transform:translateY(1px)}textarea[_ngcontent-%COMP%]{min-height:120px;resize:vertical}.error-message[_ngcontent-%COMP%]{color:#e74c3c;font-size:.9rem;text-align:center;margin-top:10px}.coupon-edit-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:20px;display:block;width:100%;max-width:250px;height:auto;margin-left:auto;margin-right:auto;border:1px solid #ddd;border-radius:10px;padding:15px;background-color:#fafafa}.coupon-edit-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#ff9aa7}"]})};export{_ as default};
