import{a as f,b as a,c as Z}from"./chunk-7PAUJINJ.js";import{$ as w,B as _,Ba as N,E,F as R,Fa as O,Ga as J,Ha as q,J as b,Ja as z,Ka as L,M as l,Ma as Y,N as u,O as H,Q as T,T as V,V as x,X as i,Y as n,Z as U,_ as A,aa as k,ba as j,ca as I,h as y,ha as p,ia as M,j as F,k as g,m as D,oa as s,pa as P,qa as B,ta as $,y as r,z as c}from"./chunk-ICBHZLZY.js";var G=[{path:"",loadComponent:()=>import("./chunk-263NKYYI.js")},{path:"login",loadComponent:()=>import("./chunk-UULQIXIP.js"),canActivate:[()=>r(a).isAuthenticated.pipe(g(e=>!e))]},{path:"signup",loadComponent:()=>import("./chunk-UULQIXIP.js"),canActivate:[()=>r(a).isAuthenticated.pipe(g(e=>!e))]},{path:"coupons/edit/:id",loadComponent:()=>import("./chunk-STCA2HEX.js")},{path:"coupons/add",loadComponent:()=>import("./chunk-DXZ2K5XW.js")},{path:"coupons/:id",loadComponent:()=>import("./chunk-3G2CDHP4.js")},{path:"coupons",loadComponent:()=>import("./chunk-MOGRE4KB.js")}];var K=(e,o)=>{let t=e.clone({url:`https://port-0-pointify-server-manager-m3833mtrd38e546a.sel4.cloudtype.app${e.url}`});return o(t)};var Q=(e,o)=>{let t=r(f).getToken(),m=e.clone({setHeaders:t?{Authorization:`Bearer ${t}`}:{}});return o(m)};var W=(e,o)=>o(e).pipe(D(t=>F(()=>t?.error||"An unknown error occurred")));function oe(e,o){return()=>e.getToken()?o.getCurrentUser():y}var X={providers:[Y(G),O(J([K,Q,W])),{provide:$,useFactory:oe,deps:[f,a],multi:!0}]};var d=class e{constructor(o,t,m){this.templateRef=o;this.viewContainer=t;this.userService=m}condition=!1;hasView=!1;destroyRef=r(b);set ifAuthenticated(o){this.condition=o,this.updateView()}ngOnInit(){this.userService.isAuthenticated.pipe(Z(this.destroyRef)).subscribe(o=>{this.updateView(o)})}updateView(o){let t=o&&this.condition||!o&&!this.condition;t&&!this.hasView?(this.viewContainer.createEmbeddedView(this.templateRef),this.hasView=!0):!t&&this.hasView&&(this.viewContainer.clear(),this.hasView=!1)}static \u0275fac=function(t){return new(t||e)(u(H),u(T),u(a))};static \u0275dir=_({type:e,selectors:[["","ifAuthenticated",""]],inputs:{ifAuthenticated:"ifAuthenticated"},standalone:!0})};function re(e,o){e&1&&(A(0),i(1,"a",8),p(2,"\uB85C\uADF8\uC778"),n(),i(3,"a",9),p(4,"\uD68C\uC6D0\uAC00\uC785"),n(),w())}function ie(e,o){if(e&1){let t=k();A(0),i(1,"span"),p(2),P(3,"async"),n(),i(4,"a",10),j("click",function(){E(t);let te=I();return R(te.logout())}),p(5,"\uB85C\uADF8\uC544\uC6C3"),n(),w()}if(e&2){let t,m=I();l(2),M((t=B(3,1,m.currentUser$))==null?null:t.email)}}var C=class e{currentUser$=r(a).currentUser$;userService=r(a);router=r(L);logout(){this.userService.logout(),this.router.navigate(["/login"])}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=c({type:e,selectors:[["app-header"]],standalone:!0,features:[s],decls:15,vars:2,consts:[[1,"header"],[1,"logo"],["href","/",1,"title"],[1,"navbar"],["href","/coupons"],["href","/cards"],[1,"auth-buttons"],[4,"ifAuthenticated"],["href","/login",1,"btn"],["href","/signup",1,"btn"],[1,"btn",3,"click"]],template:function(t,m){t&1&&(i(0,"header",0)(1,"div",1)(2,"a",2),p(3," Pointify "),n()(),i(4,"nav",3)(5,"ul")(6,"li")(7,"a",4),p(8,"\uCFE0\uD3F0"),n()(),i(9,"li")(10,"a",5),p(11,"\uCE74\uB4DC"),n()()()(),i(12,"div",6),V(13,re,5,0,"ng-container",7)(14,ie,6,3,"ng-container",7),n()()),t&2&&(l(13),x("ifAuthenticated",!1),l(),x("ifAuthenticated",!0))},dependencies:[d,N],encapsulation:2})};var h=class e{static \u0275fac=function(t){return new(t||e)};static \u0275cmp=c({type:e,selectors:[["app-footer"]],standalone:!0,features:[s],decls:4,vars:0,consts:[[1,"footer"],[1,"footer-content"]],template:function(t,m){t&1&&(i(0,"footer",0)(1,"div",1)(2,"p"),p(3,"\xA9 2024 Pointify. All rights reserved."),n()()())},encapsulation:2})};var v=class e{static \u0275fac=function(t){return new(t||e)};static \u0275cmp=c({type:e,selectors:[["app-root"]],standalone:!0,features:[s],decls:3,vars:0,template:function(t,m){t&1&&U(0,"app-header")(1,"router-outlet")(2,"app-footer")},dependencies:[C,z,h],encapsulation:2})};q(v,X).catch(e=>console.error(e));
