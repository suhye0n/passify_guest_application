import{a as N,b as g,c as k,d as P,e as x,g as f,i as G,j as R,k as V,n as q}from"./chunk-R7JGWKRF.js";import{b as B,c as M}from"./chunk-VW4TPUCN.js";import{Aa as D,Ba as w,Da as E,Ia as O,J as F,Ka as T,La as I,M as t,T as C,V as u,W as c,X as n,Y as o,Z as h,ba as b,ca as S,ha as l,ia as _,ja as p,oa as A,y as m,z as y}from"./chunk-76TGF6CF.js";function z(a,r){if(a&1&&(n(0,"li")(1,"strong"),l(2),o(),l(3),o()),a&2){let i=r.$implicit;t(2),p("",i[0],":"),t(),p(" ",i[1]," ")}}function L(a,r){if(a&1&&(n(0,"div",10)(1,"ul"),C(2,z,4,2,"li",11),o()()),a&2){let i=S();t(2),u("ngForOf",i.errorEntries)}}var v=class a{authType="";title="";isSubmitting=!1;errors={detail:{}};authForm;destroyRef=m(F);userService=m(B);route=m(O);router=m(T);constructor(){this.authForm=this.createAuthForm()}ngOnInit(){this.initializeAuthType()}createAuthForm(){return new x({email:new f("",[g.required]),password:new f("",[g.required])})}initializeAuthType(){this.authType=this.route.snapshot.url.at(-1)?.path||"",this.title=this.authType==="login"?"\uB85C\uADF8\uC778":"\uD68C\uC6D0\uAC00\uC785"}onSubmit(){if(this.isSubmitting)return;this.isSubmitting=!0,this.errors={detail:{}};let r=this.authForm.value;(this.authType==="login"?this.userService.login({email:r.email,password:r.password}):this.userService.signup({email:r.email,password:r.password})).pipe(M(this.destroyRef)).subscribe({next:()=>this.router.navigate(["/"]),error:e=>{this.errors=e,this.isSubmitting=!1}})}get errorEntries(){return Object.entries(this.errors.detail)}static \u0275fac=function(i){return new(i||a)};static \u0275cmp=y({type:a,selectors:[["app-auth-page"]],standalone:!0,features:[A],decls:15,vars:11,consts:[[1,"container"],[1,"auth-header"],[1,"auth-form",3,"ngSubmit","formGroup"],[1,"input-group"],["id","email","type","email","formControlName","email","placeholder","\uC774\uBA54\uC77C\uC744 \uC785\uB825\uD558\uC138\uC694"],["id","password","type","password","formControlName","password","placeholder","\uBE44\uBC00\uBC88\uD638\uB97C \uC785\uB825\uD558\uC138\uC694"],["class","error-message",4,"ngIf"],["type","submit",3,"disabled"],[1,"link"],[3,"routerLink"],[1,"error-message"],[4,"ngFor","ngForOf"]],template:function(i,e){if(i&1&&(n(0,"div",0)(1,"div",1)(2,"h1"),l(3),o()(),n(4,"form",2),b("ngSubmit",function(){return e.onSubmit()}),n(5,"div",3),h(6,"input",4),o(),n(7,"div",3),h(8,"input",5),o(),C(9,L,3,1,"div",6),n(10,"button",7),l(11),o()(),n(12,"div",8)(13,"a",9),l(14),o()()()),i&2){let s,d;t(3),_(e.title),t(),u("formGroup",e.authForm),t(2),c("invalid",((s=e.authForm.get("email"))==null?null:s.invalid)&&((s=e.authForm.get("email"))==null?null:s.touched)),t(2),c("invalid",((d=e.authForm.get("password"))==null?null:d.invalid)&&((d=e.authForm.get("password"))==null?null:d.touched)),t(),u("ngIf",e.errors&&e.errors.detail),t(),u("disabled",e.isSubmitting||e.authForm.invalid),t(),p(" ",e.authType==="login"?"\uB85C\uADF8\uC778":"\uD68C\uC6D0\uAC00\uC785"," "),t(2),u("routerLink",e.authType==="login"?"/signup":"/login"),t(),p(" ",e.authType==="login"?"\uACC4\uC815\uC774 \uC5C6\uC73C\uC2E0\uAC00\uC694? \uD68C\uC6D0\uAC00\uC785":"\uC774\uBBF8 \uACC4\uC815\uC774 \uC788\uC73C\uC2E0\uAC00\uC694? \uB85C\uADF8\uC778"," ")}},dependencies:[q,G,N,k,P,R,V,I,E,D,w],styles:[".auth-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.link[_ngcontent-%COMP%]{text-align:center;margin-top:2rem}.link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ff9aa7;text-decoration:none;font-size:1rem;transition:color .3s ease}.link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#ff7b8d;text-decoration:underline}"]})};export{v as default};
