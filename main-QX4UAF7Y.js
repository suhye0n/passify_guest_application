import{a as g,b as c,c as G}from"./chunk-7PAUJINJ.js";import{$ as y,B as V,Ba as O,E as f,F as C,Fa as J,Ga as L,Ha as q,J as R,Ja as z,Ka as Y,M as v,Ma as Z,N as h,O as b,Q as U,T as j,V as T,X as r,Y as a,Z as M,_ as I,aa as F,ba as m,ca as d,h as k,ha as p,ia as P,j as D,k as S,m as E,oa as u,pa as B,qa as $,ta as N,y as n,z as l}from"./chunk-ICBHZLZY.js";var K=[{path:"",loadComponent:()=>import("./chunk-ZRDV62QN.js")},{path:"login",loadComponent:()=>import("./chunk-UULQIXIP.js"),canActivate:[()=>n(c).isAuthenticated.pipe(S(t=>!t))]},{path:"signup",loadComponent:()=>import("./chunk-UULQIXIP.js"),canActivate:[()=>n(c).isAuthenticated.pipe(S(t=>!t))]},{path:"coupons/edit/:id",loadComponent:()=>import("./chunk-STCA2HEX.js")},{path:"coupons/add",loadComponent:()=>import("./chunk-DXZ2K5XW.js")},{path:"coupons/:id",loadComponent:()=>import("./chunk-3G2CDHP4.js")},{path:"coupons",loadComponent:()=>import("./chunk-MOGRE4KB.js")}];var Q=(t,o)=>{let e=t.clone({url:`https://port-0-pointify-server-manager-m3833mtrd38e546a.sel4.cloudtype.app${t.url}`});return o(e)};var W=(t,o)=>{let e=n(g).getToken(),i=t.clone({setHeaders:e?{Authorization:`Bearer ${e}`}:{}});return o(i)};var X=(t,o)=>o(t).pipe(E(e=>D(()=>e?.error||"An unknown error occurred")));function oe(t,o){return()=>t.getToken()?o.getCurrentUser():k}var ee={providers:[Z(K),J(L([Q,W,X])),{provide:N,useFactory:oe,deps:[g,c],multi:!0}]};var _=class t{constructor(o,e,i){this.templateRef=o;this.viewContainer=e;this.userService=i}condition=!1;hasView=!1;destroyRef=n(R);set ifAuthenticated(o){this.condition=o,this.updateView()}ngOnInit(){this.userService.isAuthenticated.pipe(G(this.destroyRef)).subscribe(o=>{this.updateView(o)})}updateView(o){let e=o&&this.condition||!o&&!this.condition;e&&!this.hasView?(this.viewContainer.createEmbeddedView(this.templateRef),this.hasView=!0):!e&&this.hasView&&(this.viewContainer.clear(),this.hasView=!1)}static \u0275fac=function(e){return new(e||t)(h(b),h(U),h(c))};static \u0275dir=V({type:t,selectors:[["","ifAuthenticated",""]],inputs:{ifAuthenticated:"ifAuthenticated"},standalone:!0})};function ie(t,o){if(t&1){let e=F();I(0),r(1,"a",7),m("click",function(){f(e);let s=d();return C(s.goToLogin())}),p(2,"\uB85C\uADF8\uC778"),a(),r(3,"a",7),m("click",function(){f(e);let s=d();return C(s.goToSignup())}),p(4,"\uD68C\uC6D0\uAC00\uC785"),a(),y()}}function ne(t,o){if(t&1){let e=F();I(0),r(1,"span"),p(2),B(3,"async"),a(),r(4,"a",7),m("click",function(){f(e);let s=d();return C(s.logout())}),p(5,"\uB85C\uADF8\uC544\uC6C3"),a(),y()}if(t&2){let e,i=d();v(2),P((e=$(3,1,i.currentUser$))==null?null:e.email)}}var w=class t{currentUser$=n(c).currentUser$;userService=n(c);router=n(Y);logout(){this.userService.logout(),this.router.navigate(["/login"])}goToSignup(){this.router.navigate(["/signup"])}goToLogin(){this.router.navigate(["/login"])}goToCoupon(){this.router.navigate(["/coupons"])}goToCard(){this.router.navigate(["/cards"])}goToHome(){this.router.navigate(["/"])}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=l({type:t,selectors:[["app-header"]],standalone:!0,features:[u],decls:15,vars:2,consts:[[1,"header"],[1,"logo"],[1,"title",3,"click"],[1,"navbar"],[3,"click"],[1,"auth-buttons"],[4,"ifAuthenticated"],[1,"btn",3,"click"]],template:function(e,i){e&1&&(r(0,"header",0)(1,"div",1)(2,"a",2),m("click",function(){return i.goToHome()}),p(3," Pointify "),a()(),r(4,"nav",3)(5,"ul")(6,"li")(7,"a",4),m("click",function(){return i.goToCoupon()}),p(8,"\uCFE0\uD3F0"),a()(),r(9,"li")(10,"a",4),m("click",function(){return i.goToCard()}),p(11,"\uCE74\uB4DC"),a()()()(),r(12,"div",5),j(13,ie,5,0,"ng-container",6)(14,ne,6,3,"ng-container",6),a()()),e&2&&(v(13),T("ifAuthenticated",!1),v(),T("ifAuthenticated",!0))},dependencies:[_,O],encapsulation:2})};var x=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=l({type:t,selectors:[["app-footer"]],standalone:!0,features:[u],decls:4,vars:0,consts:[[1,"footer"],[1,"footer-content"]],template:function(e,i){e&1&&(r(0,"footer",0)(1,"div",1)(2,"p"),p(3,"\xA9 2024 Pointify. All rights reserved."),a()()())},encapsulation:2})};var A=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=l({type:t,selectors:[["app-root"]],standalone:!0,features:[u],decls:3,vars:0,template:function(e,i){e&1&&M(0,"app-header")(1,"router-outlet")(2,"app-footer")},dependencies:[w,z,x],encapsulation:2})};q(A,ee).catch(t=>console.error(t));
