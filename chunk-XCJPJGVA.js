import{a as $}from"./chunk-QLAOAXEV.js";import{a as Q}from"./chunk-DZFP2UU4.js";import{a as H}from"./chunk-VNP4B37G.js";import{Da as O,E as I,Ea as L,F as _,Fa as T,G as D,H as b,Ha as j,La as F,M as p,N as s,Na as k,T as P,V as l,X as a,Y as i,Z as c,aa as M,ba as f,ca as g,d as N,da as B,ea as S,fa as w,ha as o,ia as R,ja as m,oa as V,ra as C,sa as v,u as x,va as A,x as y,z as E}from"./chunk-T7GGXQV6.js";var z=N($());var u=class n{constructor(t){this.http=t}getPointById(t){return this.http.get(`/passes/${t}`)}static \u0275fac=function(e){return new(e||n)(y(j))};static \u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"})};var J=["barcode"];function K(n,t){if(n&1){let e=M();a(0,"div")(1,"button",5),f("click",function(){I(e);let d=g();return _(d.goToEditPage())}),c(2,"i",6),o(3," \uC218\uC815 "),i(),a(4,"h3"),o(5),i(),c(6,"p"),D(),c(7,"svg",null,0),b(),a(9,"p")(10,"strong"),o(11,"\uBA54\uBAA8:"),i(),o(12),i(),a(13,"p")(14,"strong"),o(15,"\uC0DD\uC131\uC77C:"),i(),o(16),C(17,"date"),i(),a(18,"p")(19,"strong"),o(20,"\uC218\uC815\uC77C:"),i(),o(21),C(22,"date"),i()()}if(n&2){let e=g();p(5),R(e.point.title==null?null:e.point.title.name),p(7),m(" ",e.point.memo,""),p(4),m(" ",v(17,4,e.point.createdAt,"yyyy-MM-dd"),""),p(5),m(" ",v(22,7,e.point.updatedAt,"yyyy-MM-dd"),"")}}function U(n,t){n&1&&(a(0,"div")(1,"p"),o(2,"\uD3EC\uC778\uD2B8 \uC815\uBCF4\uB97C \uBD88\uB7EC\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),i()())}var h=class n{constructor(t,e,r,d){this.route=t;this.pointDetailService=e;this.router=r;this.cdr=d}point;errorMessage="";barcodeElement;isViewInitialized=!1;isLoading=!1;ngOnInit(){let t=+this.route.snapshot.paramMap.get("id");this.loadPoint(t)}ngAfterViewInit(){this.isViewInitialized=!0,this.cdr.detectChanges()}loadPoint(t){this.isLoading=!0,this.pointDetailService.getPointById(t).subscribe(e=>{this.point=e.data,this.isViewInitialized&&this.point?.barcode&&(this.cdr.detectChanges(),this.generateBarcode(String(this.point.barcode))),this.isLoading=!1},e=>{console.error("\uD3EC\uC778\uD2B8 \uBD88\uB7EC\uC624\uAE30 \uC2E4\uD328:",e),this.isLoading=!1,this.errorMessage="\uD3EC\uC778\uD2B8 \uBD88\uB7EC\uC624\uAE30 \uC2E4\uD328: "+e.message})}generateBarcode(t){this.barcodeElement?.nativeElement&&(0,z.default)(this.barcodeElement.nativeElement,t,{format:"CODE128",width:2,height:50,displayValue:!0})}goToEditPage(){this.router.navigate([`/points/edit/${this.point.id}`])}closeErrorPopup(){this.errorMessage=""}static \u0275fac=function(e){return new(e||n)(s(F),s(u),s(k),s(A))};static \u0275cmp=E({type:n,selectors:[["app-point-detail"]],viewQuery:function(e,r){if(e&1&&B(J,5),e&2){let d;S(d=w())&&(r.barcodeElement=d.first)}},standalone:!0,features:[V],decls:7,vars:4,consts:[["barcode",""],[3,"isLoading"],[3,"close","errorMessage"],[1,"container"],[4,"ngIf"],[1,"edit-point-btn",3,"click"],[1,"fas","fa-edit"]],template:function(e,r){e&1&&(c(0,"app-loading-indicator",1),a(1,"app-error-popup",2),f("close",function(){return r.closeErrorPopup()}),i(),a(2,"div",3)(3,"h1"),o(4,"\uD3EC\uC778\uD2B8 \uC0C1\uC138 \uC815\uBCF4"),i(),P(5,K,23,10,"div",4)(6,U,3,0,"div",4),i()),e&2&&(l("isLoading",r.isLoading),p(),l("errorMessage",r.errorMessage),p(4),l("ngIf",r.point),p(),l("ngIf",!r.point))},dependencies:[T,O,L,H,Q],styles:[".edit-point-btn[_ngcontent-%COMP%]{padding:12px 20px;border-radius:8px;margin:30px 0 20px}.edit-point-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}p[_ngcontent-%COMP%]:not(:first-child){border-top:1px solid #ddd;padding-top:10px}.no-point[_ngcontent-%COMP%]{text-align:center;color:#888;font-style:italic;margin-top:20px}"]})};export{h as default};
