import{a as $}from"./chunk-QLAOAXEV.js";import{a as Q}from"./chunk-DZFP2UU4.js";import{a as H}from"./chunk-VNP4B37G.js";import{Da as P,E as I,Ea as F,F as _,Fa as L,G as b,H as D,Ha as T,La as j,M as p,N as d,Na as k,T as M,V as s,X as a,Y as i,Z as u,aa as B,ba as C,ca as f,d as N,da as S,ea as w,fa as R,ha as n,ia as V,ja as l,oa as A,ra as g,sa as v,u as x,va as O,x as y,z as E}from"./chunk-T7GGXQV6.js";var z=N($());var m=class o{constructor(t){this.http=t}getCouponById(t){return this.http.get(`/passes/${t}`)}static \u0275fac=function(e){return new(e||o)(y(T))};static \u0275prov=x({token:o,factory:o.\u0275fac,providedIn:"root"})};var J=["barcode"];function K(o,t){if(o&1){let e=B();a(0,"div")(1,"button",5),C("click",function(){I(e);let c=f();return _(c.goToEditPage())}),u(2,"i",6),n(3," \uC218\uC815 "),i(),a(4,"h3"),n(5),i(),u(6,"p"),b(),u(7,"svg",null,0),D(),a(9,"p")(10,"strong"),n(11,"\uBA54\uBAA8:"),i(),n(12),i(),a(13,"p")(14,"strong"),n(15,"\uC0DD\uC131\uC77C:"),i(),n(16),g(17,"date"),i(),a(18,"p")(19,"strong"),n(20,"\uC218\uC815\uC77C:"),i(),n(21),g(22,"date"),i()()}if(o&2){let e=f();p(5),V(e.coupon.title==null?null:e.coupon.title.name),p(7),l(" ",e.coupon.memo,""),p(4),l(" ",v(17,4,e.coupon.createdAt,"yyyy-MM-dd"),""),p(5),l(" ",v(22,7,e.coupon.updatedAt,"yyyy-MM-dd"),"")}}function U(o,t){o&1&&(a(0,"div")(1,"p"),n(2,"\uCFE0\uD3F0 \uC815\uBCF4\uB97C \uBD88\uB7EC\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),i()())}var h=class o{constructor(t,e,r,c){this.route=t;this.couponDetailService=e;this.router=r;this.cdr=c}coupon;errorMessage="";barcodeElement;isViewInitialized=!1;isLoading=!1;ngOnInit(){let t=+this.route.snapshot.paramMap.get("id");this.loadCoupon(t)}ngAfterViewInit(){this.isViewInitialized=!0,this.cdr.detectChanges()}loadCoupon(t){this.isLoading=!0,this.couponDetailService.getCouponById(t).subscribe(e=>{this.coupon=e.data,this.isViewInitialized&&this.coupon?.barcode&&(this.cdr.detectChanges(),this.generateBarcode(String(this.coupon.barcode))),this.isLoading=!1},e=>{console.error("\uCFE0\uD3F0 \uBD88\uB7EC\uC624\uAE30 \uC2E4\uD328:",e),this.isLoading=!1,this.errorMessage="\uCFE0\uD3F0 \uBD88\uB7EC\uC624\uAE30 \uC2E4\uD328: "+e.message})}generateBarcode(t){this.barcodeElement?.nativeElement&&(0,z.default)(this.barcodeElement.nativeElement,t,{format:"CODE128",width:2,height:50,displayValue:!0})}goToEditPage(){this.router.navigate([`/coupons/edit/${this.coupon.id}`])}closeErrorPopup(){this.errorMessage=""}static \u0275fac=function(e){return new(e||o)(d(j),d(m),d(k),d(O))};static \u0275cmp=E({type:o,selectors:[["app-coupon-detail"]],viewQuery:function(e,r){if(e&1&&S(J,5),e&2){let c;w(c=R())&&(r.barcodeElement=c.first)}},standalone:!0,features:[A],decls:7,vars:4,consts:[["barcode",""],[3,"isLoading"],[3,"close","errorMessage"],[1,"container"],[4,"ngIf"],[1,"edit-coupon-btn",3,"click"],[1,"fas","fa-edit"]],template:function(e,r){e&1&&(u(0,"app-loading-indicator",1),a(1,"app-error-popup",2),C("close",function(){return r.closeErrorPopup()}),i(),a(2,"div",3)(3,"h1"),n(4,"\uCFE0\uD3F0 \uC0C1\uC138 \uC815\uBCF4"),i(),M(5,K,23,10,"div",4)(6,U,3,0,"div",4),i()),e&2&&(s("isLoading",r.isLoading),p(),s("errorMessage",r.errorMessage),p(4),s("ngIf",r.coupon),p(),s("ngIf",!r.coupon))},dependencies:[L,P,F,H,Q],styles:[".edit-coupon-btn[_ngcontent-%COMP%]{padding:12px 20px;border-radius:8px;margin:30px 0 20px}.edit-coupon-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}p[_ngcontent-%COMP%]:not(:first-child){border-top:1px solid #ddd;padding-top:10px}.no-coupon[_ngcontent-%COMP%]{text-align:center;color:#888;font-style:italic;margin-top:20px}"]})};export{h as default};
