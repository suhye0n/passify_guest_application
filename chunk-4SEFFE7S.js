import{a as U}from"./chunk-D4Q33I5F.js";import{a as W,c as x,d as N,f as R,h as j,i as q,o as H,p as Q}from"./chunk-E7QGTCB7.js";import{a as J}from"./chunk-GTQ55FTM.js";import{a as G}from"./chunk-EE5B5IH3.js";import{E as d,Ea as F,F as p,G as E,Ga as D,H as A,M as m,Ma as T,N as C,V as y,W as V,X as t,Y as n,Z as c,aa as P,ba as g,d as K,da as k,ea as I,fa as L,ha as s,ka as f,la as b,ma as _,oa as O,u as v,x as w,z as S,za as B}from"./chunk-GBGJR6DV.js";var z=K(U());var M=class l{constructor(o){this.http=o}addCoupon(o){return this.http.post("/passes",o)}static \u0275fac=function(r){return new(r||l)(w(D))};static \u0275prov=v({token:l,factory:l.\u0275fac,providedIn:"root"})};var Z=["barcode"],h=class l{constructor(o,r,e){this.couponAddService=o;this.router=r;this.location=e}coupon={userId:0,name:"",barcode:"",memo:""};isLoading=!1;errorMessage="";barcodeElement;ngOnInit(){this.coupon.userId=Number(localStorage.getItem("userId"))}onSubmit(){this.isLoading=!0,this.couponAddService.addCoupon(this.coupon).subscribe(o=>{this.isLoading=!1,this.router.navigate(["/coupons"])},o=>{this.isLoading=!1,this.errorMessage="\uCFE0\uD3F0 \uCD94\uAC00 \uC2E4\uD328: "+o.message})}generateBarcode(o){this.barcodeElement?.nativeElement&&o&&(0,z.default)(this.barcodeElement.nativeElement,o,{format:"CODE128",width:2,height:50,displayValue:!0})}goBack(){this.location.back()}closeErrorPopup(){this.errorMessage=""}static \u0275fac=function(r){return new(r||l)(C(M),C(T),C(B))};static \u0275cmp=S({type:l,selectors:[["app-coupon-add"]],viewQuery:function(r,e){if(r&1&&k(Z,5),r&2){let a;I(a=L())&&(e.barcodeElement=a.first)}},standalone:!0,features:[O],decls:30,vars:7,consts:[["couponForm","ngForm"],["name","ngModel"],["barcode","ngModel"],["barcodeSvg",""],[3,"isLoading"],[3,"close","errorMessage"],[1,"container"],[3,"ngSubmit"],["for","name"],["id","name","type","text","name","name","required","",3,"ngModelChange","ngModel"],["for","barcode"],["id","barcode","type","text","name","barcode","required","",3,"ngModelChange","ngModel"],["for","memo"],["id","memo","name","memo",3,"ngModelChange","ngModel"],[1,"button-group"],["type","button",1,"cancel-btn",3,"click"],[1,"fas","fa-arrow-left"],["type","submit"],[1,"fas","fa-check"]],template:function(r,e){if(r&1){let a=P();c(0,"app-loading-indicator",4),t(1,"app-error-popup",5),g("close",function(){return d(a),p(e.closeErrorPopup())}),n(),t(2,"div",6)(3,"h1"),s(4,"\uCFE0\uD3F0 \uCD94\uAC00"),n(),t(5,"form",7,0),g("ngSubmit",function(){return d(a),p(e.onSubmit())}),t(7,"div")(8,"label",8),s(9,"\uC774\uB984"),n(),t(10,"input",9,1),_("ngModelChange",function(i){return d(a),b(e.coupon.name,i)||(e.coupon.name=i),p(i)}),n()(),t(12,"div")(13,"label",10),s(14,"\uBC14\uCF54\uB4DC"),n(),t(15,"input",11,2),_("ngModelChange",function(i){return d(a),b(e.coupon.barcode,i)||(e.coupon.barcode=i),p(i)}),g("ngModelChange",function(){return d(a),p(e.generateBarcode(e.coupon.barcode))}),n(),E(),c(17,"svg",null,3),n(),A(),t(19,"div")(20,"label",12),s(21,"\uBA54\uBAA8"),n(),t(22,"textarea",13),_("ngModelChange",function(i){return d(a),b(e.coupon.memo,i)||(e.coupon.memo=i),p(i)}),n()(),t(23,"div",14)(24,"button",15),g("click",function(){return d(a),p(e.goBack())}),c(25,"i",16),s(26," \uCDE8\uC18C "),n(),t(27,"button",17),c(28,"i",18),s(29," \uC644\uB8CC "),n()()()()}r&2&&(y("isLoading",e.isLoading),m(),y("errorMessage",e.errorMessage),m(9),f("ngModel",e.coupon.name),m(5),f("ngModel",e.coupon.barcode),m(2),V("hidden",!e.coupon.barcode),m(5),f("ngModel",e.coupon.memo))},dependencies:[F,Q,q,W,x,N,H,j,R,G,J],styles:["button[_ngcontent-%COMP%]{border-radius:10px}.button-group[_ngcontent-%COMP%]{display:flex;gap:10px}.cancel-btn[_ngcontent-%COMP%]{background-color:#e0e0e0;color:#333;padding:10px 20px;cursor:pointer;display:flex;align-items:center;border:none;border-radius:10px;transition:background-color .3s}.cancel-btn[_ngcontent-%COMP%]:hover{background-color:#ccc}button[type=submit][_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;padding:10px 20px;cursor:pointer;display:flex;align-items:center;border:none;border-radius:10px;transition:background-color .3s}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#45a049}button[type=submit][_ngcontent-%COMP%]:disabled{background-color:#e0e0e0;color:#aaa;cursor:not-allowed}button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}"]})};export{h as default};
