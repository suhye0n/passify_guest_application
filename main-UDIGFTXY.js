import{a as A,b as c,c as W}from"./chunk-PWBUOXLA.js";import{a as X}from"./chunk-VNP4B37G.js";import{$ as y,B as D,Ba as L,E as d,F as l,Fa as z,Ia as N,J as F,Ja as B,Ka as J,M as C,Ma as $,N as w,Na as q,O as R,Pa as Q,Q as U,T as E,V as u,X as p,Y as r,Z as h,_ as S,aa as b,ba as m,ca as f,h as V,ha as s,j as v,k as O,m as x,oa as _,qa as H,ua as j,y as a,z as g}from"./chunk-T7GGXQV6.js";var Y=[{path:"",loadComponent:()=>import("./chunk-A3QGBC5S.js")},{path:"login",loadComponent:()=>import("./chunk-AYHMYBI6.js"),canActivate:[()=>a(c).isAuthenticated.pipe(O(e=>!e))]},{path:"signup",loadComponent:()=>import("./chunk-AYHMYBI6.js"),canActivate:[()=>a(c).isAuthenticated.pipe(O(e=>!e))]},{path:"coupons/edit/:id",loadComponent:()=>import("./chunk-ZYGGE3B2.js")},{path:"coupons/add",loadComponent:()=>import("./chunk-HUL4LBRA.js")},{path:"coupons/:id",loadComponent:()=>import("./chunk-LXZN4GBP.js")},{path:"coupons",loadComponent:()=>import("./chunk-5MNGC2SS.js")},{path:"cards/edit/:id",loadComponent:()=>import("./chunk-HSYIIJMY.js")},{path:"cards/add",loadComponent:()=>import("./chunk-F5XGGG3O.js")},{path:"cards/:id",loadComponent:()=>import("./chunk-NRSOIMYB.js")},{path:"cards",loadComponent:()=>import("./chunk-CS4DA2BG.js")},{path:"coupons",loadComponent:()=>import("./chunk-5MNGC2SS.js")},{path:"points/edit/:id",loadComponent:()=>import("./chunk-2FV3PLRF.js")},{path:"points/add",loadComponent:()=>import("./chunk-EF7HGEBD.js")},{path:"points/:id",loadComponent:()=>import("./chunk-XCJPJGVA.js")},{path:"points",loadComponent:()=>import("./chunk-B56V5PGF.js")}];var Z=(e,o)=>{let t=a(c),i=e.clone({url:`https://port-0-passify-server-manager-m3833mtrd38e546a.sel4.cloudtype.app${e.url}`});return o(i).pipe(x(n=>(console.log(n),(n.status===401||n.message.includes("Wrong authentication token")||n.message.includes("Authentication token missing"))&&t.logout(),v(()=>n))))};var G=(e,o)=>{let t=a(A).getToken(),i=e.clone({setHeaders:t?{Authorization:`Bearer ${t}`}:{}});return o(i)};var K=(e,o)=>o(e).pipe(x(t=>v(()=>t?.error||"An unknown error occurred")));function oe(e,o){return()=>e.getToken()?o.getCurrentUser():V}var ee={providers:[Q(Y),N(B([Z,G,K])),{provide:j,useFactory:oe,deps:[A,c],multi:!0}]};var M=class e{constructor(o,t,i){this.templateRef=o;this.viewContainer=t;this.userService=i}condition=!1;hasView=!1;destroyRef=a(F);set ifAuthenticated(o){this.condition=o,this.updateView()}ngOnInit(){this.userService.isAuthenticated.pipe(W(this.destroyRef)).subscribe(o=>{this.updateView(o)})}updateView(o){let t=o&&this.condition||!o&&!this.condition;t&&!this.hasView?(this.viewContainer.createEmbeddedView(this.templateRef),this.hasView=!0):!t&&this.hasView&&(this.viewContainer.clear(),this.hasView=!1)}static \u0275fac=function(t){return new(t||e)(w(R),w(U),w(c))};static \u0275dir=D({type:e,selectors:[["","ifAuthenticated",""]],inputs:{ifAuthenticated:"ifAuthenticated"},standalone:!0})};var ne=e=>({open:e}),ie=e=>({active:e});function re(e,o){if(e&1){let t=b();S(0),p(1,"li")(2,"a",6),m("click",function(){d(t);let n=f();return l(n.goToCoupon())}),s(3,"\uCFE0\uD3F0"),r()(),p(4,"li")(5,"a",6),m("click",function(){d(t);let n=f();return l(n.goToCard())}),s(6,"\uCE74\uB4DC"),r()(),p(7,"li")(8,"a",6),m("click",function(){d(t);let n=f();return l(n.goToPoint())}),s(9,"\uD3EC\uC778\uD2B8"),r()(),y()}}function ae(e,o){if(e&1){let t=b();S(0),p(1,"li")(2,"a",6),m("click",function(){d(t);let n=f();return l(n.goToLogin())}),s(3,"\uB85C\uADF8\uC778"),r()(),p(4,"li")(5,"a",6),m("click",function(){d(t);let n=f();return l(n.goToSignup())}),s(6,"\uD68C\uC6D0\uAC00\uC785"),r()(),y()}}function pe(e,o){if(e&1){let t=b();S(0),p(1,"li")(2,"a",6),m("click",function(){d(t);let n=f();return l(n.logout())}),s(3,"\uB85C\uADF8\uC544\uC6C3"),r()(),y()}}var T=class e{currentUser$=a(c).currentUser$;userService=a(c);router=a(q);isSidebarActive=!1;menuClass="close";isLoading=!1;logout(){this.isLoading=!0,this.userService.logout(),this.isLoading=!1}goToSignup(){this.router.navigate(["/signup"])}goToLogin(){this.router.navigate(["/login"])}goToCoupon(){this.router.navigate(["/coupons"])}goToCard(){this.router.navigate(["/cards"])}goToPoint(){this.router.navigate(["/points"])}goToHome(){this.router.navigate(["/"])}toggleSidebar(){this.isSidebarActive=!this.isSidebarActive,this.menuClass=this.isSidebarActive?"open":""}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=g({type:e,selectors:[["app-header"]],standalone:!0,features:[_],decls:18,vars:10,consts:[[3,"isLoading"],[1,"header"],[1,"logo"],[1,"title",3,"click"],[1,"menu-toggle",3,"click","ngClass"],[1,"sidebar",3,"ngClass"],[3,"click"],[4,"ifAuthenticated"]],template:function(t,i){t&1&&(h(0,"app-loading-indicator",0),p(1,"header",1)(2,"div",2)(3,"a",3),m("click",function(){return i.goToHome()}),s(4,"Passify"),r()(),p(5,"div",4),m("click",function(){return i.toggleSidebar()}),h(6,"div")(7,"div")(8,"div"),r()(),p(9,"div",5)(10,"ul")(11,"li")(12,"a",6),m("click",function(){return i.goToHome()}),s(13,"\uD648"),r()(),E(14,re,10,0,"ng-container",7),r(),p(15,"ul"),E(16,ae,7,0,"ng-container",7)(17,pe,4,0,"ng-container",7),r()()),t&2&&(u("isLoading",i.isLoading),C(5),u("ngClass",H(6,ne,i.menuClass==="open")),C(4),u("ngClass",H(8,ie,i.isSidebarActive)),C(5),u("ifAuthenticated",!0),C(2),u("ifAuthenticated",!1),C(),u("ifAuthenticated",!0))},dependencies:[M,z,L,X],styles:[".header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 40px;background-color:#fff;box-shadow:0 4px 12px #0000001a;transition:all .3s ease}.header[_ngcontent-%COMP%]:hover{background-color:#f9f9f9;box-shadow:0 6px 18px #00000026}.header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;left:-290px;height:100%;width:250px;background-color:#ff7b8d;color:#fff;transition:left .3s ease;display:flex;flex-direction:column;justify-content:space-around;padding:20px;z-index:999}.sidebar.active[_ngcontent-%COMP%]{left:0}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px 0}.sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:18px}.sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.menu-toggle[_ngcontent-%COMP%]{cursor:pointer;display:flex;flex-direction:column;gap:6px}.menu-toggle[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:30px;height:4px;background-color:#ff7b8d;transition:all .3s ease}.menu-toggle.open[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){transform:rotate(45deg);position:relative;top:10px}.menu-toggle.open[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){opacity:0}.menu-toggle.open[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){transform:rotate(-45deg);position:relative;top:-10px}"]})};var k=class e{static \u0275fac=function(t){return new(t||e)};static \u0275cmp=g({type:e,selectors:[["app-footer"]],standalone:!0,features:[_],decls:4,vars:0,consts:[[1,"footer"],[1,"footer-content"]],template:function(t,i){t&1&&(p(0,"footer",0)(1,"div",1)(2,"p"),s(3,"\xA9 2024 Passify. All rights reserved."),r()()())},styles:[".footer[_ngcontent-%COMP%]{background-color:#0000001a;color:#4a4a4a;padding:8px 4px;text-align:center;box-shadow:0 -4px 12px #0000001a;position:fixed;bottom:0;left:0;right:0;z-index:1000}.footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:9px}.footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px}"]})};var P=class e{static \u0275fac=function(t){return new(t||e)};static \u0275cmp=g({type:e,selectors:[["app-root"]],standalone:!0,features:[_],decls:4,vars:0,consts:[["data-ad-unit","DAN-ME3VR70QbdJ5oDXI","data-ad-width","320","data-ad-height","50",1,"kakao_ad_area",2,"display","none"]],template:function(t,i){t&1&&h(0,"app-header")(1,"router-outlet")(2,"ins",0)(3,"app-footer")},dependencies:[T,$,k],encapsulation:2})};J(P,ee).catch(e=>console.error(e));
