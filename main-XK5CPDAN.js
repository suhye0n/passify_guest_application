import{a as A,b as s,c as G}from"./chunk-KQJWYR3N.js";import{$ as x,B as R,Ba as O,E as d,F as f,Fa as J,Ga as L,Ha as q,J as b,Ja as z,Ka as Y,M as v,Ma as Z,N as _,O as U,Q as j,T as H,V as g,X as r,Y as a,Z as M,_ as h,aa as w,ba as m,ca as l,h as k,ha as c,ia as P,j as D,k as V,m as E,oa as C,pa as B,qa as $,ta as N,y as n,z as u}from"./chunk-ICBHZLZY.js";var K=[{path:"",loadComponent:()=>import("./chunk-NUW72RRT.js")},{path:"login",loadComponent:()=>import("./chunk-BKWZO7U4.js"),canActivate:[()=>n(s).isAuthenticated.pipe(V(t=>!t))]},{path:"signup",loadComponent:()=>import("./chunk-BKWZO7U4.js"),canActivate:[()=>n(s).isAuthenticated.pipe(V(t=>!t))]},{path:"coupons/edit/:id",loadComponent:()=>import("./chunk-STCA2HEX.js")},{path:"coupons/add",loadComponent:()=>import("./chunk-DXZ2K5XW.js")},{path:"coupons/:id",loadComponent:()=>import("./chunk-3G2CDHP4.js")},{path:"coupons",loadComponent:()=>import("./chunk-2VDUI7TN.js")}];var Q=(t,o)=>{let e=t.clone({url:`https://port-0-pointify-server-manager-m3833mtrd38e546a.sel4.cloudtype.app${t.url}`});return o(e)};var W=(t,o)=>{let e=n(A).getToken(),i=t.clone({setHeaders:e?{Authorization:`Bearer ${e}`}:{}});return o(i)};var X=(t,o)=>o(t).pipe(E(e=>D(()=>e?.error||"An unknown error occurred")));function oe(t,o){return()=>t.getToken()?o.getCurrentUser():k}var ee={providers:[Z(K),J(L([Q,W,X])),{provide:N,useFactory:oe,deps:[A,s],multi:!0}]};var S=class t{constructor(o,e,i){this.templateRef=o;this.viewContainer=e;this.userService=i}condition=!1;hasView=!1;destroyRef=n(b);set ifAuthenticated(o){this.condition=o,this.updateView()}ngOnInit(){this.userService.isAuthenticated.pipe(G(this.destroyRef)).subscribe(o=>{this.updateView(o)})}updateView(o){let e=o&&this.condition||!o&&!this.condition;e&&!this.hasView?(this.viewContainer.createEmbeddedView(this.templateRef),this.hasView=!0):!e&&this.hasView&&(this.viewContainer.clear(),this.hasView=!1)}static \u0275fac=function(e){return new(e||t)(_(U),_(j),_(s))};static \u0275dir=R({type:t,selectors:[["","ifAuthenticated",""]],inputs:{ifAuthenticated:"ifAuthenticated"},standalone:!0})};function ie(t,o){if(t&1){let e=w();h(0),r(1,"nav",5)(2,"ul")(3,"li")(4,"a",6),m("click",function(){d(e);let p=l();return f(p.goToCoupon())}),c(5,"\uCFE0\uD3F0"),a()(),r(6,"li")(7,"a",6),m("click",function(){d(e);let p=l();return f(p.goToCard())}),c(8,"\uCE74\uB4DC"),a()()()(),x()}}function ne(t,o){if(t&1){let e=w();h(0),r(1,"a",7),m("click",function(){d(e);let p=l();return f(p.goToLogin())}),c(2,"\uB85C\uADF8\uC778"),a(),r(3,"a",7),m("click",function(){d(e);let p=l();return f(p.goToSignup())}),c(4,"\uD68C\uC6D0\uAC00\uC785"),a(),x()}}function re(t,o){if(t&1){let e=w();h(0),r(1,"span"),c(2),B(3,"async"),a(),r(4,"a",7),m("click",function(){d(e);let p=l();return f(p.logout())}),c(5,"\uB85C\uADF8\uC544\uC6C3"),a(),x()}if(t&2){let e,i=l();v(2),P((e=$(3,1,i.currentUser$))==null?null:e.email)}}var T=class t{currentUser$=n(s).currentUser$;userService=n(s);router=n(Y);logout(){this.userService.logout(),this.router.navigate(["/login"])}goToSignup(){this.router.navigate(["/signup"])}goToLogin(){this.router.navigate(["/login"])}goToCoupon(){this.router.navigate(["/coupons"])}goToCard(){this.router.navigate(["/cards"])}goToHome(){this.router.navigate(["/"])}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=u({type:t,selectors:[["app-header"]],standalone:!0,features:[C],decls:8,vars:3,consts:[[1,"header"],[1,"logo"],[1,"title",3,"click"],[4,"ifAuthenticated"],[1,"auth-buttons"],[1,"navbar"],[3,"click"],[1,"btn",3,"click"]],template:function(e,i){e&1&&(r(0,"header",0)(1,"div",1)(2,"a",2),m("click",function(){return i.goToHome()}),c(3," Pointify "),a()(),H(4,ie,9,0,"ng-container",3),r(5,"div",4),H(6,ne,5,0,"ng-container",3)(7,re,6,3,"ng-container",3),a()()),e&2&&(v(4),g("ifAuthenticated",!0),v(2),g("ifAuthenticated",!1),v(),g("ifAuthenticated",!0))},dependencies:[S,O],encapsulation:2})};var I=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=u({type:t,selectors:[["app-footer"]],standalone:!0,features:[C],decls:4,vars:0,consts:[[1,"footer"],[1,"footer-content"]],template:function(e,i){e&1&&(r(0,"footer",0)(1,"div",1)(2,"p"),c(3,"\xA9 2024 Pointify. All rights reserved."),a()()())},encapsulation:2})};var y=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=u({type:t,selectors:[["app-root"]],standalone:!0,features:[C],decls:3,vars:0,template:function(e,i){e&1&&M(0,"app-header")(1,"router-outlet")(2,"app-footer")},dependencies:[T,z,I],encapsulation:2})};q(y,ee).catch(t=>console.error(t));
