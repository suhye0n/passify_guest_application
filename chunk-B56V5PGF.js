import{b as R,c as W}from"./chunk-PWBUOXLA.js";import{a as H,c as Q,h as U,l as z,m as q,n as G,p as J}from"./chunk-ONP6AOLD.js";import{a as X}from"./chunk-DZFP2UU4.js";import{a as K}from"./chunk-VNP4B37G.js";import{$ as B,Ca as A,Da as D,E as m,F as f,Fa as V,Ga as F,Ha as N,J as T,M as c,N as _,Na as j,T as C,V as l,W as w,X as a,Y as s,Z as u,_ as E,aa as P,ba as p,ca as d,ha as g,ja as b,ka as v,la as M,ma as x,oa as I,u as O,x as S,y as L,z as k}from"./chunk-T7GGXQV6.js";var h=class o{constructor(e){this.http=e}getPoints(e=0,t=10,n="name",i=""){let r=new F().set("offset",e.toString()).set("limit",t.toString()).set("type","POINT");return i&&(r=r.set(n,i)),this.http.get("/passes",{params:r})}static \u0275fac=function(t){return new(t||o)(S(N))};static \u0275prov=O({token:o,factory:o.\u0275fac,providedIn:"root"})};function $(o,e){if(o&1){let t=P();a(0,"li",10),p("click",function(){let i=m(t).$implicit,r=d(2);return f(r.goToDetail(i.id))}),g(1),s()}if(o&2){let t=e.$implicit;c(),b(" ",t.title==null?null:t.title.name," ")}}function tt(o,e){if(o&1){let t=P();E(0),a(1,"button",10),p("click",function(){let i=m(t).$implicit,r=d(2);return f(r.goToPage(i))}),g(2),s(),B()}if(o&2){let t=e.$implicit,n=d(2);c(),w("active",t===n.currentPage),c(),b(" ",t," ")}}function et(o,e){if(o&1){let t=P();a(0,"div")(1,"ul",13),C(2,$,2,1,"li",14),s(),a(3,"div",15)(4,"button",16),p("click",function(){m(t);let i=d();return f(i.goToPreviousPage())}),u(5,"i",17),s(),C(6,tt,3,3,"ng-container",18),a(7,"button",16),p("click",function(){m(t);let i=d();return f(i.goToNextPage())}),u(8,"i",19),s()()()}if(o&2){let t=d();c(2),l("ngForOf",t.points),c(2),l("disabled",t.currentPage===1),c(2),l("ngForOf",t.pagesToDisplay()),c(),l("disabled",t.currentPage===t.totalPages.length)}}function nt(o,e){o&1&&(a(0,"div")(1,"p"),g(2,"\uD3EC\uC778\uD2B8\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."),s()())}var y=class o{constructor(e,t,n){this.router=e;this.userService=t;this.pointListService=n}isAuthenticated=!1;points=[];destroyRef=L(T);offset=0;limit=10;count=0;currentPage=1;totalPages=[];searchBy="name";searchQuery="";isLoading=!1;errorMessage="";ngOnInit(){this.userService.isAuthenticated.pipe(W(this.destroyRef)).subscribe(e=>{this.isAuthenticated=e}),this.loadPoints()}loadPoints(){this.isLoading=!0,this.pointListService.getPoints(this.offset,this.limit,this.searchBy,this.searchQuery).subscribe(e=>{this.points=e.data,this.count=e.count,this.totalPages=Array(Math.ceil(this.count/this.limit)).fill(0).map((t,n)=>n+1),this.isLoading=!1},e=>{this.isLoading=!1,this.errorMessage="\uD3EC\uC778\uD2B8 \uBAA9\uB85D \uBD88\uB7EC\uC624\uAE30 \uC2E4\uD328: "+e.message,console.error("\uD3EC\uC778\uD2B8 \uBAA9\uB85D \uBD88\uB7EC\uC624\uAE30 \uC2E4\uD328:",e)})}searchPoints(){this.currentPage=1,this.offset=0,this.loadPoints()}goToDetail(e){this.router.navigate(["/points",e])}goToAddPoint(){this.router.navigate(["/points/add"])}goToPage(e){this.currentPage=e,this.offset=(e-1)*this.limit,this.loadPoints()}goToPreviousPage(){this.currentPage>1&&this.goToPage(this.currentPage-1)}goToNextPage(){this.currentPage<this.totalPages.length&&this.goToPage(this.currentPage+1)}pagesToDisplay(){let e=Math.floor((this.currentPage-1)/5)*5+1,t=Math.min(e+4,this.totalPages.length);return Array.from({length:t-e+1},(n,i)=>e+i)}closeErrorPopup(){this.errorMessage=""}static \u0275fac=function(t){return new(t||o)(_(j),_(R),_(h))};static \u0275cmp=k({type:o,selectors:[["app-point-list"]],standalone:!0,features:[I],decls:19,vars:6,consts:[[3,"isLoading"],[3,"close","errorMessage"],[1,"container"],[1,"add-point-btn",3,"click"],[1,"fas","fa-plus"],[1,"search-container"],[3,"ngModelChange","change","ngModel"],["value","name"],["value","memo"],["type","text","placeholder","\uAC80\uC0C9\uC5B4 \uC785\uB825",3,"ngModelChange","ngModel"],[3,"click"],[1,"fas","fa-search"],[4,"ngIf"],[1,"point-list"],[3,"click",4,"ngFor","ngForOf"],[1,"pagination"],[3,"click","disabled"],[1,"fas","fa-chevron-left"],[4,"ngFor","ngForOf"],[1,"fas","fa-chevron-right"]],template:function(t,n){t&1&&(u(0,"app-loading-indicator",0),a(1,"app-error-popup",1),p("close",function(){return n.closeErrorPopup()}),s(),a(2,"div",2)(3,"h1"),g(4,"\uD3EC\uC778\uD2B8 \uB9AC\uC2A4\uD2B8"),s(),a(5,"button",3),p("click",function(){return n.goToAddPoint()}),u(6,"i",4),g(7," \uCD94\uAC00 "),s(),a(8,"div",5)(9,"select",6),x("ngModelChange",function(r){return M(n.searchBy,r)||(n.searchBy=r),r}),p("change",function(){return n.searchPoints()}),a(10,"option",7),g(11,"\uC774\uB984"),s(),a(12,"option",8),g(13,"\uBA54\uBAA8"),s()(),a(14,"input",9),x("ngModelChange",function(r){return M(n.searchQuery,r)||(n.searchQuery=r),r}),s(),a(15,"button",10),p("click",function(){return n.searchPoints()}),u(16,"i",11),s()(),C(17,et,9,4,"div",12)(18,nt,3,0,"div",12),s()),t&2&&(l("isLoading",n.isLoading),c(),l("errorMessage",n.errorMessage),c(8),v("ngModel",n.searchBy),c(5),v("ngModel",n.searchQuery),c(3),l("ngIf",n.points.length>0),c(),l("ngIf",n.points.length===0))},dependencies:[V,A,D,J,q,G,H,z,Q,U,K,X],styles:[".add-point-btn[_ngcontent-%COMP%]{padding:12px 20px;border-radius:8px;margin:30px 0 20px}.add-point-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.point-list[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0;border-radius:8px;overflow:hidden}.point-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:15px;font-size:18px;color:#333;border-bottom:1px solid #e0e0e0;transition:background-color .3s,transform .1s;display:flex;align-items:center;justify-content:center}.point-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.point-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e9c8c814;transform:scale(1.02);cursor:pointer}p[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:20px 0;gap:8px}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 12px;font-size:16px;border:none;border-radius:4px;color:#fff;background-color:#ff9aa7;cursor:pointer;transition:background-color .3s,transform .2s}.pagination[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#ff7b8d;font-weight:700}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(.active){background-color:#ff7b8d;transform:scale(1.05)}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#e0e0e0;color:#999;cursor:not-allowed;transform:none}.search-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:20px}.search-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px 12px;font-size:16px;border-radius:8px;border:1px solid #e0e0e0;transition:border-color .3s;outline:none}.search-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:150px;background-color:#fff;color:#333}.search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex-grow:1;background-color:#fff;color:#333}.search-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#ff9aa7}.search-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 12px;background-color:#ff9aa7;color:#fff;border:none;border-radius:8px;cursor:pointer;transition:background-color .3s,transform .2s}.search-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ff7b8d;transform:scale(1.05)}"]})};export{y as default};
