import{a as N}from"./chunk-D4Q33I5F.js";import{a as H}from"./chunk-GTQ55FTM.js";import{a as k}from"./chunk-EE5B5IH3.js";import{Ca as O,Da as P,E as I,Ea as F,F as _,G as b,Ga as L,H as D,Ka as T,M as p,Ma as j,N as d,T as B,V as s,X as r,Y as i,Z as l,aa as M,ba as C,ca as f,d as z,da as S,ea as w,fa as R,ha as n,ja as u,oa as V,qa as g,ra as v,u as x,ua as A,x as E,z as y}from"./chunk-GBGJR6DV.js";var Q=z(N());var m=class o{constructor(t){this.http=t}getCouponById(t){return this.http.get(`/coupons/${t}`)}static \u0275fac=function(e){return new(e||o)(E(L))};static \u0275prov=x({token:o,factory:o.\u0275fac,providedIn:"root"})};var G=["barcode"];function J(o,t){if(o&1){let e=M();r(0,"div")(1,"button",5),C("click",function(){I(e);let c=f();return _(c.goToEditPage())}),l(2,"i",6),n(3," \uC218\uC815 "),i(),r(4,"p")(5,"strong"),n(6,"\uC774\uB984:"),i(),n(7),i(),r(8,"p")(9,"strong"),n(10,"\uBC14\uCF54\uB4DC:"),i()(),b(),l(11,"svg",null,0),D(),r(13,"p")(14,"strong"),n(15,"\uBA54\uBAA8:"),i(),n(16),i(),r(17,"p")(18,"strong"),n(19,"\uC0DD\uC131\uC77C:"),i(),n(20),g(21,"date"),i(),r(22,"p")(23,"strong"),n(24,"\uC218\uC815\uC77C:"),i(),n(25),g(26,"date"),i()()}if(o&2){let e=f();p(7),u(" ",e.coupon.name,""),p(9),u(" ",e.coupon.memo,""),p(4),u(" ",v(21,4,e.coupon.createdAt,"yyyy-MM-dd"),""),p(5),u(" ",v(26,7,e.coupon.updatedAt,"yyyy-MM-dd"),"")}}function K(o,t){o&1&&(r(0,"div")(1,"p"),n(2,"\uCFE0\uD3F0 \uC815\uBCF4\uB97C \uBD88\uB7EC\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),i()())}var h=class o{constructor(t,e,a,c){this.route=t;this.couponDetailService=e;this.router=a;this.cdr=c}coupon;errorMessage="";barcodeElement;isViewInitialized=!1;isLoading=!1;ngOnInit(){let t=+this.route.snapshot.paramMap.get("id");this.loadCoupon(t)}ngAfterViewInit(){this.isViewInitialized=!0,this.cdr.detectChanges()}loadCoupon(t){this.isLoading=!0,this.couponDetailService.getCouponById(t).subscribe(e=>{this.coupon=e.data,this.isViewInitialized&&this.coupon?.barcode&&(this.cdr.detectChanges(),this.generateBarcode(String(this.coupon.barcode))),this.isLoading=!1},e=>{console.error("\uCFE0\uD3F0 \uBD88\uB7EC\uC624\uAE30 \uC2E4\uD328:",e),this.isLoading=!1,this.errorMessage="\uCFE0\uD3F0 \uBD88\uB7EC\uC624\uAE30 \uC2E4\uD328: "+e.message})}generateBarcode(t){this.barcodeElement?.nativeElement&&(0,Q.default)(this.barcodeElement.nativeElement,t,{format:"CODE128",width:2,height:50,displayValue:!0})}goToEditPage(){this.router.navigate([`/coupons/edit/${this.coupon.id}`])}closeErrorPopup(){this.errorMessage=""}static \u0275fac=function(e){return new(e||o)(d(T),d(m),d(j),d(A))};static \u0275cmp=y({type:o,selectors:[["app-coupon-detail"]],viewQuery:function(e,a){if(e&1&&S(G,5),e&2){let c;w(c=R())&&(a.barcodeElement=c.first)}},standalone:!0,features:[V],decls:7,vars:4,consts:[["barcode",""],[3,"isLoading"],[3,"close","errorMessage"],[1,"container"],[4,"ngIf"],[1,"edit-coupon-btn",3,"click"],[1,"fas","fa-edit"]],template:function(e,a){e&1&&(l(0,"app-loading-indicator",1),r(1,"app-error-popup",2),C("close",function(){return a.closeErrorPopup()}),i(),r(2,"div",3)(3,"h1"),n(4,"\uCFE0\uD3F0 \uC0C1\uC138 \uC815\uBCF4"),i(),B(5,J,27,10,"div",4)(6,K,3,0,"div",4),i()),e&2&&(s("isLoading",a.isLoading),p(),s("errorMessage",a.errorMessage),p(4),s("ngIf",a.coupon),p(),s("ngIf",!a.coupon))},dependencies:[F,O,P,k,H],styles:[".edit-coupon-btn[_ngcontent-%COMP%]{padding:12px 20px;border-radius:8px;margin:30px 0 20px}.edit-coupon-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}p[_ngcontent-%COMP%]:not(:first-child){border-top:1px solid #ddd;padding-top:10px}.no-coupon[_ngcontent-%COMP%]{text-align:center;color:#888;font-style:italic;margin-top:20px}"]})};export{h as default};
