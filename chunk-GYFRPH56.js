import{a as j,c as q,d as H,f as L,h as P,i as Q,l as G,m as k}from"./chunk-R7JGWKRF.js";import{a as z}from"./chunk-Y2LNA2BJ.js";import{Da as N,E as d,Ea as O,F as m,G as S,H as w,Ia as A,Ka as T,M as s,N as c,V as M,X as r,Y as a,Z as I,aa as V,ba as h,d as J,da as F,ea as B,fa as D,ga as R,ha as p,ka as g,la as C,ma as f,oa as W,u as E,x as y,z as _}from"./chunk-76TGF6CF.js";var x=J(z());var b=class u{constructor(e){this.http=e}getCoupon(e){return this.http.get(`/coupons/${e}`)}updateCoupon(e){return this.http.put(`/coupons/${e.id}`,e)}static \u0275fac=function(o){return new(o||u)(y(O))};static \u0275prov=E({token:u,factory:u.\u0275fac,providedIn:"root"})};var X=["barcode"],v=class u{constructor(e,o,t){this.couponEditService=e;this.router=o;this.route=t}coupon={userId:0,name:"",barcode:"",memo:""};couponId="";barcodeElement;ngOnInit(){this.route.paramMap.subscribe(e=>{this.couponId=e.get("id")||"",this.getCouponDetails(this.couponId)}),this.coupon.userId=Number(localStorage.getItem("userId"))}getCouponDetails(e){this.couponEditService.getCoupon(e).subscribe(o=>{this.coupon=o.data,this.generateBarcode(this.coupon.barcode)},o=>{console.error("\uCFE0\uD3F0 \uC815\uBCF4 \uBD88\uB7EC\uC624\uAE30 \uC2E4\uD328:",o)})}onSubmit(){this.couponEditService.updateCoupon(this.coupon).subscribe(e=>{this.router.navigate([`/coupons/${this.couponId}`])},e=>{console.error("\uCFE0\uD3F0 \uC218\uC815 \uC2E4\uD328:",e)})}generateBarcode(e){this.barcodeElement?.nativeElement&&e&&(0,x.default)(this.barcodeElement.nativeElement,e,{format:"CODE128",width:2,height:50,displayValue:!0})}static \u0275fac=function(o){return new(o||u)(c(b),c(T),c(A))};static \u0275cmp=_({type:u,selectors:[["app-coupon-edit"]],viewQuery:function(o,t){if(o&1&&F(X,5),o&2){let i;B(i=D())&&(t.barcodeElement=i.first)}},standalone:!0,features:[W],decls:21,vars:4,consts:[["couponForm","ngForm"],["barcode",""],[1,"container"],[3,"ngSubmit"],["for","name"],["id","name","type","text","name","name","required","",3,"ngModelChange","ngModel"],["for","barcode"],["id","barcode","type","text","name","barcode","required","",3,"ngModelChange","ngModel"],["for","memo"],["id","memo","name","memo",3,"ngModelChange","ngModel"],["type","submit",3,"disabled"]],template:function(o,t){if(o&1){let i=V();r(0,"div",2)(1,"h1"),p(2,"\uCFE0\uD3F0 \uC218\uC815"),a(),r(3,"form",3,0),h("ngSubmit",function(){return d(i),m(t.onSubmit())}),r(5,"div")(6,"label",4),p(7,"\uC774\uB984"),a(),r(8,"input",5),f("ngModelChange",function(n){return d(i),C(t.coupon.name,n)||(t.coupon.name=n),m(n)}),a()(),r(9,"div")(10,"label",6),p(11,"\uBC14\uCF54\uB4DC"),a(),r(12,"input",7),f("ngModelChange",function(n){return d(i),C(t.coupon.barcode,n)||(t.coupon.barcode=n),m(n)}),h("ngModelChange",function(){return d(i),m(t.generateBarcode(t.coupon.barcode))}),a(),S(),I(13,"svg",null,1),a(),w(),r(15,"div")(16,"label",8),p(17,"\uBA54\uBAA8"),a(),r(18,"textarea",9),f("ngModelChange",function(n){return d(i),C(t.coupon.memo,n)||(t.coupon.memo=n),m(n)}),a()(),r(19,"button",10),p(20,"\uCFE0\uD3F0 \uC218\uC815"),a()()()}if(o&2){let i=R(4);s(8),g("ngModel",t.coupon.name),s(4),g("ngModel",t.coupon.barcode),s(6),g("ngModel",t.coupon.memo),s(),M("disabled",i.invalid)}},dependencies:[N,k,Q,j,q,H,G,P,L],styles:["button[_ngcontent-%COMP%]{border-radius:10px}"]})};export{v as default};
