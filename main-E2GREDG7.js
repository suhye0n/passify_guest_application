import{a as A,b as c,c as W}from"./chunk-NIFBSFRH.js";import{a as X}from"./chunk-EE5B5IH3.js";import{$ as y,Aa as L,B as D,E as u,Ea as z,F as f,Ha as N,Ia as B,J as F,Ja as J,La as $,M as g,Ma as q,N as w,O as R,Oa as Q,Q as U,T as I,V as m,X as p,Y as a,Z as h,_ as S,aa as b,ba as l,ca as C,h as V,ha as s,j as v,k as O,m as x,oa as _,pa as E,ta as j,y as r,z as d}from"./chunk-GBGJR6DV.js";var Y=[{path:"",loadComponent:()=>import("./chunk-7LASJGNY.js")},{path:"login",loadComponent:()=>import("./chunk-J7IUIE3A.js"),canActivate:[()=>r(c).isAuthenticated.pipe(O(e=>!e))]},{path:"signup",loadComponent:()=>import("./chunk-J7IUIE3A.js"),canActivate:[()=>r(c).isAuthenticated.pipe(O(e=>!e))]},{path:"coupons/edit/:id",loadComponent:()=>import("./chunk-CWOJY7XT.js")},{path:"coupons/add",loadComponent:()=>import("./chunk-4SEFFE7S.js")},{path:"coupons/:id",loadComponent:()=>import("./chunk-I3TROFJY.js")},{path:"coupons",loadComponent:()=>import("./chunk-BH7V6THM.js")}];var Z=(e,n)=>{let t=r(c),o=e.clone({url:`https://port-0-passify-server-manager-m3833mtrd38e546a.sel4.cloudtype.app${e.url}`});return n(o).pipe(x(i=>(console.log(i),(i.status===401||i.message.includes("Wrong authentication token")||i.message.includes("Authentication token missing"))&&t.logout(),v(()=>i))))};var G=(e,n)=>{let t=r(A).getToken(),o=e.clone({setHeaders:t?{Authorization:`Bearer ${t}`}:{}});return n(o)};var K=(e,n)=>n(e).pipe(x(t=>v(()=>t?.error||"An unknown error occurred")));function ne(e,n){return()=>e.getToken()?n.getCurrentUser():V}var ee={providers:[Q(Y),N(B([Z,G,K])),{provide:j,useFactory:ne,deps:[A,c],multi:!0}]};var M=class e{constructor(n,t,o){this.templateRef=n;this.viewContainer=t;this.userService=o}condition=!1;hasView=!1;destroyRef=r(F);set ifAuthenticated(n){this.condition=n,this.updateView()}ngOnInit(){this.userService.isAuthenticated.pipe(W(this.destroyRef)).subscribe(n=>{this.updateView(n)})}updateView(n){let t=n&&this.condition||!n&&!this.condition;t&&!this.hasView?(this.viewContainer.createEmbeddedView(this.templateRef),this.hasView=!0):!t&&this.hasView&&(this.viewContainer.clear(),this.hasView=!1)}static \u0275fac=function(t){return new(t||e)(w(R),w(U),w(c))};static \u0275dir=D({type:e,selectors:[["","ifAuthenticated",""]],inputs:{ifAuthenticated:"ifAuthenticated"},standalone:!0})};var oe=e=>({open:e}),ie=e=>({active:e});function re(e,n){if(e&1){let t=b();S(0),p(1,"li")(2,"a",6),l("click",function(){u(t);let i=C();return f(i.goToCoupon())}),s(3,"\uCFE0\uD3F0"),a()(),p(4,"li")(5,"a",6),l("click",function(){u(t);let i=C();return f(i.goToCard())}),s(6,"\uCE74\uB4DC"),a()(),y()}}function ae(e,n){if(e&1){let t=b();S(0),p(1,"li")(2,"a",6),l("click",function(){u(t);let i=C();return f(i.goToLogin())}),s(3,"\uB85C\uADF8\uC778"),a()(),p(4,"li")(5,"a",6),l("click",function(){u(t);let i=C();return f(i.goToSignup())}),s(6,"\uD68C\uC6D0\uAC00\uC785"),a()(),y()}}function pe(e,n){if(e&1){let t=b();S(0),p(1,"li")(2,"a",6),l("click",function(){u(t);let i=C();return f(i.logout())}),s(3,"\uB85C\uADF8\uC544\uC6C3"),a()(),y()}}var k=class e{currentUser$=r(c).currentUser$;userService=r(c);router=r(q);isSidebarActive=!1;menuClass="close";isLoading=!1;logout(){this.isLoading=!0,this.userService.logout(),this.isLoading=!1}goToSignup(){this.router.navigate(["/signup"])}goToLogin(){this.router.navigate(["/login"])}goToCoupon(){this.router.navigate(["/coupons"])}goToCard(){this.router.navigate(["/cards"])}goToHome(){this.router.navigate(["/"])}toggleSidebar(){this.isSidebarActive=!this.isSidebarActive,this.menuClass=this.isSidebarActive?"open":""}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=d({type:e,selectors:[["app-header"]],standalone:!0,features:[_],decls:18,vars:10,consts:[[3,"isLoading"],[1,"header"],[1,"logo"],[1,"title",3,"click"],[1,"menu-toggle",3,"click","ngClass"],[1,"sidebar",3,"ngClass"],[3,"click"],[4,"ifAuthenticated"]],template:function(t,o){t&1&&(h(0,"app-loading-indicator",0),p(1,"header",1)(2,"div",2)(3,"a",3),l("click",function(){return o.goToHome()}),s(4,"Passify"),a()(),p(5,"div",4),l("click",function(){return o.toggleSidebar()}),h(6,"div")(7,"div")(8,"div"),a()(),p(9,"div",5)(10,"ul")(11,"li")(12,"a",6),l("click",function(){return o.goToHome()}),s(13,"\uD648"),a()(),I(14,re,7,0,"ng-container",7),a(),p(15,"ul"),I(16,ae,7,0,"ng-container",7)(17,pe,4,0,"ng-container",7),a()()),t&2&&(m("isLoading",o.isLoading),g(5),m("ngClass",E(6,oe,o.menuClass==="open")),g(4),m("ngClass",E(8,ie,o.isSidebarActive)),g(5),m("ifAuthenticated",!0),g(2),m("ifAuthenticated",!1),g(),m("ifAuthenticated",!0))},dependencies:[M,z,L,X],styles:[".header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 40px;background-color:#fff;box-shadow:0 4px 12px #0000001a;transition:all .3s ease}.header[_ngcontent-%COMP%]:hover{background-color:#f9f9f9;box-shadow:0 6px 18px #00000026}.header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;left:-290px;height:100%;width:250px;background-color:#ff7b8d;color:#fff;transition:left .3s ease;display:flex;flex-direction:column;justify-content:space-around;padding:20px;z-index:999}.sidebar.active[_ngcontent-%COMP%]{left:0}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px 0}.sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:18px}.sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.menu-toggle[_ngcontent-%COMP%]{cursor:pointer;display:flex;flex-direction:column;gap:6px}.menu-toggle[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:30px;height:4px;background-color:#ff7b8d;transition:all .3s ease}.menu-toggle.open[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){transform:rotate(45deg);position:relative;top:10px}.menu-toggle.open[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){opacity:0}.menu-toggle.open[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){transform:rotate(-45deg);position:relative;top:-10px}"]})};var P=class e{static \u0275fac=function(t){return new(t||e)};static \u0275cmp=d({type:e,selectors:[["app-footer"]],standalone:!0,features:[_],decls:4,vars:0,consts:[[1,"footer"],[1,"footer-content"]],template:function(t,o){t&1&&(p(0,"footer",0)(1,"div",1)(2,"p"),s(3,"\xA9 2024 Passify. All rights reserved."),a()()())},styles:[".footer[_ngcontent-%COMP%]{background-color:#0000001a;color:#4a4a4a;padding:8px 4px;text-align:center;box-shadow:0 -4px 12px #0000001a;position:fixed;bottom:0;left:0;right:0;z-index:1000}.footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:9px}.footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px}"]})};var T=class e{static \u0275fac=function(t){return new(t||e)};static \u0275cmp=d({type:e,selectors:[["app-root"]],standalone:!0,features:[_],decls:4,vars:0,consts:[["data-ad-unit","DAN-ME3VR70QbdJ5oDXI","data-ad-width","320","data-ad-height","50",1,"kakao_ad_area",2,"display","none"]],template:function(t,o){t&1&&h(0,"app-header")(1,"router-outlet")(2,"ins",0)(3,"app-footer")},dependencies:[k,$,P],encapsulation:2})};J(T,ee).catch(e=>console.error(e));
