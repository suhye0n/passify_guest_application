import{a as $}from"./chunk-QLAOAXEV.js";import{a as Q}from"./chunk-DZFP2UU4.js";import{a as H}from"./chunk-VNP4B37G.js";import{Da as P,E as I,Ea as L,F as _,Fa as T,G as b,H as D,Ha as j,La as F,M as d,N as s,Na as k,T as M,V as p,X as o,Y as i,Z as l,aa as B,ba as C,ca as f,d as N,da as S,ea as w,fa as R,ha as n,ia as V,ja as m,oa as A,ra as g,sa as v,u as x,va as O,x as y,z as E}from"./chunk-T7GGXQV6.js";var z=N($());var u=class r{constructor(t){this.http=t}getCardById(t){return this.http.get(`/passes/${t}`)}static \u0275fac=function(e){return new(e||r)(y(j))};static \u0275prov=x({token:r,factory:r.\u0275fac,providedIn:"root"})};var J=["barcode"];function K(r,t){if(r&1){let e=B();o(0,"div")(1,"button",5),C("click",function(){I(e);let c=f();return _(c.goToEditPage())}),l(2,"i",6),n(3," \uC218\uC815 "),i(),o(4,"h3"),n(5),i(),l(6,"p"),b(),l(7,"svg",null,0),D(),o(9,"p")(10,"strong"),n(11,"\uBA54\uBAA8:"),i(),n(12),i(),o(13,"p")(14,"strong"),n(15,"\uC0DD\uC131\uC77C:"),i(),n(16),g(17,"date"),i(),o(18,"p")(19,"strong"),n(20,"\uC218\uC815\uC77C:"),i(),n(21),g(22,"date"),i()()}if(r&2){let e=f();d(5),V(e.card.title==null?null:e.card.title.name),d(7),m(" ",e.card.memo,""),d(4),m(" ",v(17,4,e.card.createdAt,"yyyy-MM-dd"),""),d(5),m(" ",v(22,7,e.card.updatedAt,"yyyy-MM-dd"),"")}}function U(r,t){r&1&&(o(0,"div")(1,"p"),n(2,"\uCE74\uB4DC \uC815\uBCF4\uB97C \uBD88\uB7EC\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),i()())}var h=class r{constructor(t,e,a,c){this.route=t;this.cardDetailService=e;this.router=a;this.cdr=c}card;errorMessage="";barcodeElement;isViewInitialized=!1;isLoading=!1;ngOnInit(){let t=+this.route.snapshot.paramMap.get("id");this.loadCard(t)}ngAfterViewInit(){this.isViewInitialized=!0,this.cdr.detectChanges()}loadCard(t){this.isLoading=!0,this.cardDetailService.getCardById(t).subscribe(e=>{this.card=e.data,this.isViewInitialized&&this.card?.barcode&&(this.cdr.detectChanges(),this.generateBarcode(String(this.card.barcode))),this.isLoading=!1},e=>{console.error("\uCE74\uB4DC \uBD88\uB7EC\uC624\uAE30 \uC2E4\uD328:",e),this.isLoading=!1,this.errorMessage="\uCE74\uB4DC \uBD88\uB7EC\uC624\uAE30 \uC2E4\uD328: "+e.message})}generateBarcode(t){this.barcodeElement?.nativeElement&&(0,z.default)(this.barcodeElement.nativeElement,t,{format:"CODE128",width:2,height:50,displayValue:!0})}goToEditPage(){this.router.navigate([`/cards/edit/${this.card.id}`])}closeErrorPopup(){this.errorMessage=""}static \u0275fac=function(e){return new(e||r)(s(F),s(u),s(k),s(O))};static \u0275cmp=E({type:r,selectors:[["app-card-detail"]],viewQuery:function(e,a){if(e&1&&S(J,5),e&2){let c;w(c=R())&&(a.barcodeElement=c.first)}},standalone:!0,features:[A],decls:7,vars:4,consts:[["barcode",""],[3,"isLoading"],[3,"close","errorMessage"],[1,"container"],[4,"ngIf"],[1,"edit-card-btn",3,"click"],[1,"fas","fa-edit"]],template:function(e,a){e&1&&(l(0,"app-loading-indicator",1),o(1,"app-error-popup",2),C("close",function(){return a.closeErrorPopup()}),i(),o(2,"div",3)(3,"h1"),n(4,"\uCE74\uB4DC \uC0C1\uC138 \uC815\uBCF4"),i(),M(5,K,23,10,"div",4)(6,U,3,0,"div",4),i()),e&2&&(p("isLoading",a.isLoading),d(),p("errorMessage",a.errorMessage),d(4),p("ngIf",a.card),d(),p("ngIf",!a.card))},dependencies:[T,P,L,H,Q],styles:[".edit-card-btn[_ngcontent-%COMP%]{padding:12px 20px;border-radius:8px;margin:30px 0 20px}.edit-card-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}p[_ngcontent-%COMP%]:not(:first-child){border-top:1px solid #ddd;padding-top:10px}.no-card[_ngcontent-%COMP%]{text-align:center;color:#888;font-style:italic;margin-top:20px}"]})};export{h as default};
