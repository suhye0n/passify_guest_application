import{a as N,c as A,d as T,f as j,h as z,i as q,l as H,m as L}from"./chunk-R7JGWKRF.js";import{a as Y}from"./chunk-Y2LNA2BJ.js";import{Da as D,E as u,Ea as R,F as d,G as E,H as w,Ia as k,Ka as W,M as s,N as l,V as x,X as r,Y as a,Z as O,aa as S,ba as _,d as G,da as P,ea as I,fa as V,ga as F,ha as p,ka as g,la as f,ma as C,oa as B,u as M,x as v,z as y}from"./chunk-76TGF6CF.js";var Q=G(Y());var b=class c{constructor(e){this.http=e}getCoupon(e){return this.http.get(`/coupons/${e}`)}updateCoupon(e){return this.http.put(`/coupons/${e.id}`,e)}static \u0275fac=function(o){return new(o||c)(v(R))};static \u0275prov=M({token:c,factory:c.\u0275fac,providedIn:"root"})};var U=["barcode"],h=class c{constructor(e,o,t){this.couponEditService=e;this.router=o;this.route=t}coupon={userId:0,name:"",barcode:"",memo:""};couponId="";barcodeElement;ngOnInit(){this.route.paramMap.subscribe(e=>{this.couponId=e.get("id")||"",this.getCouponDetails(this.couponId)}),this.coupon.userId=Number(localStorage.getItem("userId"))}getCouponDetails(e){this.couponEditService.getCoupon(e).subscribe(o=>{this.coupon=o.data,this.generateBarcode(this.coupon.barcode)},o=>{console.error("\uCFE0\uD3F0 \uC815\uBCF4 \uBD88\uB7EC\uC624\uAE30 \uC2E4\uD328:",o)})}onSubmit(){this.couponEditService.updateCoupon(this.coupon).subscribe(e=>{this.router.navigate([`/coupons/${this.couponId}`])},e=>{console.error("\uCFE0\uD3F0 \uC218\uC815 \uC2E4\uD328:",e)})}generateBarcode(e){this.barcodeElement?.nativeElement&&e&&(0,Q.default)(this.barcodeElement.nativeElement,e,{format:"CODE128",width:2,height:50,displayValue:!0})}static \u0275fac=function(o){return new(o||c)(l(b),l(W),l(k))};static \u0275cmp=y({type:c,selectors:[["app-coupon-edit"]],viewQuery:function(o,t){if(o&1&&P(U,5),o&2){let i;I(i=V())&&(t.barcodeElement=i.first)}},standalone:!0,features:[B],decls:21,vars:4,consts:[["couponForm","ngForm"],["barcode",""],[1,"coupon-edit-container"],[3,"ngSubmit"],["for","name"],["id","name","type","text","name","name","required","",3,"ngModelChange","ngModel"],["for","barcode"],["id","barcode","type","text","name","barcode","required","",3,"ngModelChange","ngModel"],["for","memo"],["id","memo","name","memo",3,"ngModelChange","ngModel"],["type","submit",3,"disabled"]],template:function(o,t){if(o&1){let i=S();r(0,"div",2)(1,"h1"),p(2,"\uCFE0\uD3F0 \uC218\uC815"),a(),r(3,"form",3,0),_("ngSubmit",function(){return u(i),d(t.onSubmit())}),r(5,"div")(6,"label",4),p(7,"\uC774\uB984"),a(),r(8,"input",5),C("ngModelChange",function(n){return u(i),f(t.coupon.name,n)||(t.coupon.name=n),d(n)}),a()(),r(9,"div")(10,"label",6),p(11,"\uBC14\uCF54\uB4DC"),a(),r(12,"input",7),C("ngModelChange",function(n){return u(i),f(t.coupon.barcode,n)||(t.coupon.barcode=n),d(n)}),_("ngModelChange",function(){return u(i),d(t.generateBarcode(t.coupon.barcode))}),a(),E(),O(13,"svg",null,1),a(),w(),r(15,"div")(16,"label",8),p(17,"\uBA54\uBAA8"),a(),r(18,"textarea",9),C("ngModelChange",function(n){return u(i),f(t.coupon.memo,n)||(t.coupon.memo=n),d(n)}),a()(),r(19,"button",10),p(20,"\uCFE0\uD3F0 \uC218\uC815"),a()()()}if(o&2){let i=F(4);s(8),g("ngModel",t.coupon.name),s(4),g("ngModel",t.coupon.barcode),s(6),g("ngModel",t.coupon.memo),s(),x("disabled",i.invalid)}},dependencies:[D,L,q,N,A,T,H,z,j],styles:[".coupon-edit-container[_ngcontent-%COMP%]{width:80%;max-width:600px;margin:50px auto;padding:30px;background:linear-gradient(145deg,#fff,#f2f2f2);border-radius:15px;box-shadow:0 4px 20px #0000001a;transition:transform .3s ease-in-out}.coupon-edit-container[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.coupon-edit-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;color:#333;text-align:center;margin-bottom:20px}.coupon-edit-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.coupon-edit-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#555;font-weight:600}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{padding:12px;font-size:1rem;border:2px solid #ddd;border-radius:10px;width:100%;box-sizing:border-box;background-color:#fafafa;transition:border-color .3s ease,background-color .3s ease}input[type=text][_ngcontent-%COMP%]:focus, input[type=number][_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{border-color:#ff9aa7;background-color:#fff;outline:none}button[_ngcontent-%COMP%]{padding:14px;font-size:1.1rem;color:#fff;background-color:#ff9aa7;border:none;border-radius:10px;cursor:pointer;transition:background-color .3s ease,transform .2s ease-in-out;font-weight:600}button[_ngcontent-%COMP%]:hover{background-color:#ff7b8d;transform:translateY(-2px)}button[_ngcontent-%COMP%]:active{transform:translateY(1px)}textarea[_ngcontent-%COMP%]{min-height:120px;resize:vertical}.error-message[_ngcontent-%COMP%]{color:#e74c3c;font-size:.9rem;text-align:center;margin-top:10px}.coupon-edit-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:10px;display:block;margin-left:auto;margin-right:auto}.coupon-edit-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#ff9aa7}"]})};export{h as default};
